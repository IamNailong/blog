<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Blog</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="Description">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">
  <style>
    /* ä½ å¯ä»¥ä¿ç•™è¿™ä¸ªæ ·å¼ï¼Œå®ƒèƒ½ç»™è¯„è®ºåŒºé¡¶éƒ¨åŠ ä¸ªè¾¹è· */
    .giscus-container {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #eee;
    }
  </style>
</head>

<body>
  <nav>
    <a href="https://www.google.com">Google</a>
  </nav>
  <div id="app"></div>
  <script>
    window.$docsify = {
      coverpage: true,
      search: {
        placeholder: 'ğŸ” æœç´¢',
        noData: 'æ‰¾ä¸åˆ°ç»“æœ',
        depth: 3
      },
      name: 'Blog',
      repo: 'https://github.com/iamnailong/blog',
      loadSidebar: true,
      subMaxLevel: 3,
      count: {
        countable: true,
        fontsize: '0.9em',
        color: 'rgb(90,90,90)',
        language: 'chinese'
      },

      // --- Giscus æ’ä»¶ ---
      plugins: [
        function (hook, vm) {
          hook.doneEach(function () {
            // 1. è·å–æ–‡ç« å†…å®¹çš„ DOM å…ƒç´ 
            var article = document.querySelector('.markdown-section');
            if (!article) {
              return;
            }

            // 2. æ¸…ç†æ‰æ—§çš„ Giscus å®¹å™¨ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
            var oldGiscus = document.querySelector('.giscus-container');
            if (oldGiscus) {
              oldGiscus.remove();
            }

            // 3. åˆ›å»ºæ–°çš„ Giscus å®¹å™¨
            var container = document.createElement('div');
            container.className = 'giscus-container'; // ä½¿ç”¨ class æ–¹ä¾¿åº”ç”¨æ ·å¼

            // 4. å°†æ–°å®¹å™¨æ·»åŠ åˆ°æ–‡ç« æœ«å°¾
            article.appendChild(container);

            // --- å…³é”®ä¿®å¤ï¼šä½¿ç”¨ç‰¹å®š term ---

            // 5. è·å–å½“å‰é¡µé¢çš„ Docsify è·¯å¾„ (e.g., '/' or '/guide/page')
            var path = vm.route.path;

            // 6. åˆ›å»ºä¸€ä¸ª Giscus èƒ½è¯†åˆ«çš„ã€å”¯ä¸€çš„ discussion 'term'
            //    æˆ‘ä»¬ä½¿ç”¨è·¯å¾„æ¥åˆ›å»ºï¼Œå¹¶æ›¿æ¢ç‰¹æ®Šå­—ç¬¦
            var discussionTerm = 'page-' + path.replace(/[^a-zA-Z0-9]/g, '-');
            if (path === '/') {
              discussionTerm = 'page-home'; // å•ç‹¬ç»™é¦–é¡µä¸€ä¸ªåå­—
            }

            // 7. åˆ›å»º Giscus è„šæœ¬
            var giscusScript = document.createElement('script');
            giscusScript.src = 'https://giscus.app/client.js';
            giscusScript.setAttribute('data-repo', 'iamnailong/blog');
            giscusScript.setAttribute('data-repo-id', 'R_kgDOQMp16g');
            giscusScript.setAttribute('data-category', 'Announcements');
            giscusScript.setAttribute('data-category-id', 'DIC_kwDOQMp16s4CxWRO');

            // 8. å…³é”®ï¼šè®¾ç½® mapping ä¸º 'specific' å¹¶æä¾›å”¯ä¸€çš„ 'term'
            giscusScript.setAttribute('data-mapping', 'specific');
            giscusScript.setAttribute('data-term', discussionTerm);

            giscusScript.setAttribute('data-strict', '0');
            giscusScript.setAttribute('data-reactions-enabled', '1');
            giscusScript.setAttribute('data-emit-metadata', '0');
            giscusScript.setAttribute('data-input-position', 'bottom');
            giscusScript.setAttribute('data-theme', 'light');
            giscusScript.setAttribute('data-lang', 'zh-CN');
            giscusScript.setAttribute('crossorigin', 'anonymous');
            giscusScript.async = true;

            // 9. å°†è„šæœ¬æ·»åŠ åˆ°æ–°å®¹å™¨ä¸­ï¼Œè§¦å‘ Giscus åŠ è½½
            container.appendChild(giscusScript);
          })
        }
      ]
    }
  </script>
  <script src="//cdn.jsdelivr.net/npm/docsify@4"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
  <script src="//unpkg.com/docsify-count/dist/countable.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs/components/prism-bash.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs/components/prism-php.min.js"></script>
</body>

</html>
